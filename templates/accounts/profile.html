<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profile • School Management</title>
    <meta
      name="description"
      content="User profile page for School Management System."
    />

    <!-- Tailwind CSS (Play CDN for quick prototyping). For production, compile locally. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: {
                50: "#eef6ff",
                100: "#d9eaff",
                200: "#bcd9ff",
                300: "#91c1ff",
                400: "#5da0ff",
                500: "#347eff",
                600: "#1f67f2",
                700: "#1b56cc",
                800: "#1a49a6",
                900: "#183f88",
              },
            },
            boxShadow: {
              soft: "0 10px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1)",
            },
          },
        },
      };
    </script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cpath fill='%23347eff' d='M8 18a6 6 0 0 1 3-5.2l18-10.4a6 6 0 0 1 6 0l18 10.4A6 6 0 0 1 56 18v28a6 6 0 0 1-3 5.2L35 61.6a6 6 0 0 1-6 0L11 51.2A6 6 0 0 1 8 46z'/%3E%3Cpath fill='white' d='M22 22h20v6H22zM22 32h20v4H22zM22 40h12v4H22z'/%3E%3C/svg%3E"
    />
    <style>
      html {
        scroll-behavior: smooth;
      }
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
    </style>
  </head>
  <body
    class="bg-gray-50 text-gray-800 antialiased selection:bg-brand-100 selection:text-brand-800 dark:bg-gray-950 dark:text-gray-100"
    x-data="app()"
    x-init="init()"
    :class="{ 'dark': theme === 'dark' }"
  >
    <!-- Top Banner / Alert (optional) -->
    <div
      class="hidden md:block bg-gradient-to-r from-brand-600 to-brand-500 text-white text-sm"
    >
      <div
        class="max-w-7xl mx-auto px-4 py-2 flex items-center justify-between"
      >
        <p class="truncate">
          Welcome to EduTrack — A modern School Management System template.
        </p>
        <a href="/" class="underline/50 hover:underline font-medium">Home</a>
      </div>
    </div>

    <!-- Navigation -->
    <header
      class="sticky top-0 z-40 backdrop-blur supports-backdrop-blur:bg-white/70 bg-white/80 border-b border-gray-100 dark:bg-gray-900/70 dark:border-gray-800"
    >
      <nav class="max-w-7xl mx-auto px-4">
        <div class="flex h-16 items-center justify-between">
          <!-- Left: Brand -->
          <div class="flex items-center gap-3">
            <a
              href="/"
              class="flex items-center gap-2 group"
              aria-label="EduTrack Home"
            >
              <span
                class="inline-grid place-items-center w-9 h-9 rounded-xl bg-brand-600 text-white shadow-soft group-hover:scale-105 transition-transform"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    d="M6 2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12v-2H7a1 1 0 1 1 0-2h12V4a2 2 0 0 0-2-2H6z"
                  />
                </svg>
              </span>
              <span
                class="font-semibold tracking-tight text-gray-900 dark:text-white"
                >EduTrack</span
              >
            </a>
          </div>
          <!-- Center: Primary Nav -->
          <div class="hidden md:flex items-center gap-6 text-sm">
            <a href="/" class="hover:text-brand-700 dark:hover:text-brand-300"
              >Home</a
            >
            <a
              href="#profile"
              class="hover:text-brand-700 dark:hover:text-brand-300"
              >Profile</a
            >
          </div>
          <!-- Right: Actions -->
          <div class="flex items-center gap-2">
            <button
              @click="toggleTheme()"
              class="p-2 rounded-xl border border-gray-200 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800"
              aria-label="Toggle theme"
            >
              <svg
                x-show="theme === 'light'"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="w-5 h-5"
              >
                <path
                  d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm0 4a1 1 0 0 1-1-1v-1h2v1a1 1 0 0 1-1 1zM4 13H3a1 1 0 1 1 0-2h1v2zm17 0h-1v-2h1a1 1 0 1 1 0 2zM6.2 6.2 5.5 5.5a1 1 0 1 1 1.4-1.4l.7.7-1.4 1.4zm11.3 11.3.7.7a1 1 0 0 1-1.4 1.4l-.7-.7 1.4-1.4zM6.2 17.8 4.8 19.2a1 1 0 0 1-1.4-1.4l1.4-1.4 1.4 1.4zM19.2 4.8a1 1 0 1 1 1.4 1.4l-1.4 1.4-1.4-1.4 1.4-1.4z"
                />
              </svg>
              <svg
                x-show="theme === 'dark'"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="w-5 h-5"
              >
                <path
                  d="M21.64 13a9 9 0 1 1-10.63-10 1 1 0 0 1 1.18 1.18A7 7 0 0 0 20.46 14a1 1 0 0 1 1.18 1.18A9 9 0 0 1 21.64 13z"
                />
              </svg>
            </button>
            {% if user.is_authenticated %}
            <a
              href="{% url 'logout' %}"
              class="inline-block px-3 py-2 text-sm rounded-xl border border-gray-200 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800"
              >Sign out</a
            >
            {% else %}
            <a
              href="{% url 'login' %}"
              class="inline-block px-3 py-2 text-sm rounded-xl border border-gray-200 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800"
              >Sign in</a
            >
            {% endif %}
          </div>
        </div>
      </nav>
    </header>

    <!-- Profile Section -->
    <section id="profile" class="max-w-3xl mx-auto px-4 py-12">
      <div
        class="bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-3xl shadow-soft p-8"
      >
        <div class="flex flex-col md:flex-row items-center gap-8">
          <div class="flex-shrink-0">
            <img
              src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}https://ui-avatars.com/api/?name={{ user.username }}{% endif %}"
              alt="Profile"
              class="w-32 h-32 rounded-2xl border-4 border-brand-600 object-cover shadow"
            />
          </div>
          <div class="flex-1">
            <h2 class="text-2xl font-bold mb-2">{{ user.username }}</h2>
            <p class="text-gray-600 dark:text-gray-300 mb-1">
              <span class="font-semibold">Email:</span> {{ user.email }}
            </p>
            <p class="text-gray-600 dark:text-gray-300 mb-1">
              <span class="font-semibold">National ID:</span> {{ user.national_id }}
            </p>
            <p class="text-gray-600 dark:text-gray-300 mb-1">
              <span class="font-semibold">Phone:</span> {{ user.phone_number }}
            </p>
            <p class="text-gray-600 dark:text-gray-300 mb-1">
              <span class="font-semibold">Role:</span>
              {% if user.is_staff %}Admin{% elif user.is_teacher %}Teacher{% elif user.is_student %}Student{% elif user.is_parent %}Parent{% else %}User{% endif %}
            </p>
            <div class="mt-4 flex gap-2">
              <a
                href="{% url 'logout' %}"
                class="inline-block px-4 py-2 rounded-xl bg-brand-600 text-white hover:bg-brand-700 shadow-soft"
                >Sign out</a
              >
              <a
                href="{% url 'profile_update' %}"
                class="inline-block px-4 py-2 rounded-xl bg-brand-500 text-white hover:bg-brand-700 shadow-soft"
                >Update Profile</a
              >
              <a
                href="{% url 'reset_password' %}"
                class="inline-block px-4 py-2 rounded-xl bg-brand-500 text-white hover:bg-brand-700 shadow-soft"
                >Update Password</a
              >
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="border-t border-gray-100 dark:border-gray-800">
      <div
        class="max-w-7xl mx-auto px-4 py-10 grid sm:grid-cols-2 md:grid-cols-4 gap-8"
      >
        <div>
          <div class="flex items-center gap-2">
            <span
              class="inline-grid place-items-center w-8 h-8 rounded-lg bg-brand-600 text-white"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="w-4 h-4"
              >
                <path
                  d="M6 2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12v-2H7a1 1 0 1 1 0-2h12V4a2 2 0 0 0-2-2H6z"
                />
              </svg>
            </span>
            <span class="font-semibold">EduTrack</span>
          </div>
          <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">
            A modern, accessible school management template.
          </p>
        </div>
        <div>
          <p class="text-sm font-semibold">Platform</p>
          <ul class="mt-3 space-y-2 text-sm text-gray-600 dark:text-gray-300">
            <li><a href="/" class="hover:underline">Home</a></li>
            <li><a href="#profile" class="hover:underline">Profile</a></li>
          </ul>
        </div>
        <div>
          <p class="text-sm font-semibold">Resources</p>
          <ul class="mt-3 space-y-2 text-sm text-gray-600 dark:text-gray-300">
            <li><a href="#" class="hover:underline">Docs</a></li>
            <li><a href="#" class="hover:underline">Support</a></li>
            <li><a href="#" class="hover:underline">Community</a></li>
          </ul>
        </div>
        <div>
          <p class="text-sm font-semibold">Contact</p>
          <ul class="mt-3 space-y-2 text-sm text-gray-600 dark:text-gray-300">
            <li>Email: admin@example.com</li>
            <li>Phone: +62 812-0000-0000</li>
          </ul>
        </div>
      </div>
      <div
        class="px-4 py-6 text-center text-xs text-gray-500 border-t border-gray-100 dark:border-gray-800"
      >
        © <span x-text="year"></span> EduTrack. All rights reserved.
      </div>
    </footer>

    <script>
      function app() {
        return {
          theme: "light",
          mobileOpen: false,
          year: new Date().getFullYear(),
          init() {
            const saved = localStorage.getItem("theme");
            if (saved) this.theme = saved;
            else if (window.matchMedia("(prefers-color-scheme: dark)").matches)
              this.theme = "dark";
          },
          toggleTheme() {
            this.theme = this.theme === "dark" ? "light" : "dark";
            localStorage.setItem("theme", this.theme);
          },
        };
      }
    </script>
  </body>
</html>
