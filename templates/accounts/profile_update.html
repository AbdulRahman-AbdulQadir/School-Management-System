{% extends 'base.html' %}
{% load static %}
{% block title %}Update Profile â€¢ School Management{% endblock %}
{% block content %}
    <!-- Update Profile Section -->
    <section class="max-w-3xl mx-auto px-4 py-12">
      <div
        class="bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-3xl shadow-soft p-8"
      >
        <h2 class="text-2xl font-bold mb-6">Update Profile</h2>
        <form method="post" enctype="multipart/form-data" class="space-y-4">
          {% csrf_token %}
          <div class="flex flex-col md:flex-row items-center gap-8">
            <div class="flex-shrink-0 flex flex-col items-center gap-6">
              <!-- Profile Image -->
              <div>
                <img
                  src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}https://ui-avatars.com/api/?name={{ user.username }}{% endif %}"
                  alt="Profile"
                  class="w-32 h-32 rounded-2xl border-4 border-brand-600 object-cover shadow"
                />
                <img
                  id="profileImagePreview"
                  class="w-32 h-32 rounded-2xl border-4 border-dashed border-brand-400 object-cover shadow mt-2 hidden"
                  alt="Preview"
                />
                {% if user.profile_image %}
                <div class="mt-2 text-xs text-gray-500 text-center">
                  Current Profile Photo
                </div>
                {% endif %}
              </div>
              <!-- National ID Image -->
              <div>
                <img
                  src="{% if user.national_id_image %}{{ user.national_id_image.url }}{% else %}https://ui-avatars.com/api/?name=ID{% endif %}"
                  alt="National ID"
                  class="w-32 h-32 rounded-2xl border-4 border-brand-400 object-cover shadow"
                />
                <img
                  id="nationalIdImagePreview"
                  class="w-32 h-32 rounded-2xl border-4 border-dashed border-brand-400 object-cover shadow mt-2 hidden"
                  alt="Preview"
                />
                {% if user.national_id_image %}
                <div class="mt-2 text-xs text-gray-500 text-center">
                  Current National ID Photo
                </div>
                {% endif %}
              </div>
            </div>
            <div class="flex-1 space-y-4">
              <div>
                <label class="block font-semibold mb-1">Username</label>
                <input
                  type="text"
                  name="username"
                  value="{{ user.username }}"
                  placeholder="Username"
                  class="w-full rounded-xl border px-3 py-2 text-gray-900 placeholder-gray-800 dark:placeholder-gray-200"
                  required
                />
              </div>
              <div>
                <label class="block font-semibold mb-1">Email</label>
                <input
                  type="email"
                  name="email"
                  value="{{ user.email }}"
                  placeholder="Email"
                  class="w-full rounded-xl border px-3 py-2 text-gray-900 placeholder-gray-800 dark:placeholder-gray-200"
                  required
                />
              </div>
              <div>
                <label class="block font-semibold mb-1">National ID</label>
                <input
                  type="text"
                  name="national_id"
                  value="{{ user.national_id }}"
                  placeholder="National ID"
                  class="w-full rounded-xl border px-3 py-2 text-gray-900 placeholder-gray-800 dark:placeholder-gray-200"
                  required
                />
              </div>
              <div>
                <label class="block font-semibold mb-1">Phone Number</label>
                <input
                  type="text"
                  name="phone_number"
                  value="{{ user.phone_number }}"
                  placeholder="Phone Number"
                  class="w-full rounded-xl border px-3 py-2 text-gray-900 placeholder-gray-800 dark:placeholder-gray-200"
                  required
                />
              </div>
              <div>
                <label class="block font-semibold mb-1">Profile Image</label>
                <input
                  type="file"
                  name="profile_image"
                  id="profileImageInput"
                  class="w-full rounded-xl border px-3 py-2 text-gray-900 placeholder-gray-800 dark:placeholder-gray-200"
                />
                {% if user.profile_image %}
                <div class="mt-1 text-xs text-gray-500">
                  Current image shown left
                </div>
                {% endif %}
              </div>
              <div>
                <label class="block font-semibold mb-1"
                  >National ID Image</label
                >
                <input
                  type="file"
                  name="national_id_image"
                  id="nationalIdImageInput"
                  class="w-full rounded-xl border px-3 py-2 text-gray-900 placeholder-gray-800 dark:placeholder-gray-200"
                />
                {% if user.national_id_image %}
                <div class="mt-1 text-xs text-gray-500">
                  Current image shown left
                </div>
                {% endif %}
              </div>
              <button
                type="submit"
                class="mt-4 px-4 py-2 rounded-xl bg-brand-600 text-white hover:bg-brand-700 shadow-soft"
              >
                Save Changes
              </button>
              <a
                href="{% url 'profile' %}"
                class="ml-2 px-4 py-2 rounded-xl bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700 shadow-soft"
                >Cancel</a
              >
            </div>
          </div>
        </form>
      </div>
    </section>
{% endblock %}